<!DOCTYPE HTML>
<html>

<head>
    <meta name="viewport" content="width=320, user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html, charset=utf-8">
    <title></title>


<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/jquery.mobile-1.3.2.min.css" />
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.mobile-1.3.2.min.js"></script>


<link rel="stylesheet" type="text/css" href="css/main.css" />
</head>

<script type="text/javascript">

	function sendData() {
		 var form = $("#loginForm");    
		  var u = $("#username", form).val();
		  var p = $("#password", form).val();
		 $.ajax({
		        type       : "GET",
		        url        :  sessionStorage.getItem("serverDomain") + "/login?",
		        crossDomain: false,
		        beforeSend : function() {$.mobile.loading('show')},
		        complete   : function() {$.mobile.loading('hide')},
		        data       : {username : u, password : p},
		        dataType   : 'json',
		        success    : function(data) {
		        	sessionStorage.setItem("usertoken", data.members.token);
		        	sessionStorage.setItem("currentUser", u);
		        	window.location.replace('foodList.html');
		        	console.log("login success!");
		        },
		        error      : function(e) {
		        	// phonegap alerts
		           navigator.notification.alert("Please specify a valid username and password");
		           console.log("login failure!"); 
		        }
		    });    
		 return false;
	}
	
	
</script>
<body>
<div  class="app">
		<style>
#email .ui-icon {
	background: url("img/Toolbar1.png");
	background-size: 35px 35px;
}
#pen .ui-icon {
	background: url("img/Toolbar2.png");
	background-size: 35px 35px;
}
#io .ui-icon {
	background: url("img/Toolbar3.png");
		background-size: 35px 35px;
}
#trash .ui-icon {
	background: url("img/Toolbar4.png");
		background-size: 35px 35px;
}
#friends .ui-icon {
	background: url("img/Toolbar5.png");
		background-size: 35px 35px;
}
</style>
<div id="loginPage" data-role="page" data-theme="a">

    <div data-role="header">
        <h1>Euphoria</h1>
    </div>

    <div data-role="content">    

        <form id="loginForm">
        <div data-role="fieldcontain" class="ui-hide-label">
            <label for="username">Username:</label>
            <input type="text" name="username" id="username" value="" placeholder="Username" />
        </div>
        <div data-role="fieldcontain" class="ui-hide-label">
            <label for="password">Password:</label>
            <input type="password" name="password" id="password" value="" placeholder="Password" />
        </div>	
        <div class="ui-grid-a">	
		<div class="ui-block-a">
        	<input type="submit" value="Login" id="submitButton" onclick="sendData(); return false;">
        </div>
        <div class="ui-block-b">
        	<input type="submit" value="Register" id="regButton" onclick="window.location.href='register.html'; return false;">
        </div>
         </div>
        </form>
        
    </div>

</div>
</div>
	<script type="text/javascript" src="cordova.js"></script>
</body>
</html>