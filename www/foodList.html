<html>
<head>

<title></title>

<meta name="viewport" content="width=device-width, user-scalable=no">
<link rel="stylesheet" href="css/jquery.mobile-1.3.2.min.css" />
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.mobile-1.3.2.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/main.css" />
<script type="text/javascript" src="js/databaseModule.js"></script>
<script type="text/javascript" src="js/date.format.js"></script>
<script type="text/javascript" src="js/userActionTracker.js"></script>
<script type="text/javascript" src="js/foodList.js"></script>
<script type="text/javascript" src="js/foodUsage.js"></script>
<script type="text/javascript" src="js/wasteReason.js"></script>
</head>

<body  onload="onLoad();">
	<div class="app">	
	<div data-role="page" id="home" data-theme="a">

	<script type="text/javascript">	
	
	
	$(document).on("pageload",function(event,data){
		
		if(data.dataUrl.indexOf("foodUsage") != -1) {
			sendUserAction(3, getNow(), "user list opened");
		} else if(data.dataUrl.indexOf("wastereason") != -1) {
			sendUserAction(4, getNow(), "waste list opened");
		}  else if(data.dataUrl.indexOf("survey") != -1) {
			sendUserAction(5, getNow(), "survey opened");
		} else if(data.dataUrl.indexOf("userInfo") != -1)
			sendUserAction(6, getNow(), "user info opened");
		}
		
	
	//comment
	
	);

	
	$(document).on("pagebeforeshow","#user",function(){ 
		sendUserAction(3, getNow(), "user list opened");
		});
	
	$(document).on("pagebeforeshow","#home",function(){ // When entering pagetwo
		sendUserAction(1, getNow(), "app opened");
		});
	
	//do not change this paheinit event.. mobile init doesn't work
	$(document).bind("pageinit", function()
			{
		
		 $.mobile.defaultPageTransition ='none';
	      $.mobile.defaultDialogTransition = 'none';
		  $.mobile.buttonMarkup.hoverDelay = 0;
		  
		  $("#willBuy").bind("touchstart", willBuyHandler);
			$("#ihave").bind("touchstart", iHaveHandler);
			
			   /*  if (navigator.userAgent.indexOf("Android") != -1)
			    {
			        $.mobile.defaultPageTransition = 'none';
			        $.mobile.defaultDialogTransition = 'none';
			    } */
			});
	

	function willBuyHandler(event) {
		addFoods(0);
	}
	function iHaveHandler(event) {
		addFoods(1);
	}
</script>
			<div data-role="header" data-position="fixed" data-id="nav"> 
				<h1>EUPHORIA</h1>
			 <a href="#nav-panel" data-icon="bars" data-iconpos="notext"  data-iconshadow="false"  class="ui-icon-nodisc">Menu</a>
			</div>
			
			<div data-role="content" style="height: 100%;">
		
				<!-- <input type="search" name="search" id="searchfood" value="" /> -->
				<ul data-role="listview" data-filter="true" data-filter-reveal="true" data-split-theme="a" data-inset="true" 
				data-filter-theme="a"  data-filter-placeholder="Search food or select below..." 
				data-theme="a" data-mini="true" id="searchFoodlist"></ul><p></p>
					<label class="table-title-label"><i>What did you buy or would like to buy?</i></label>
				<div  id="ContentFoodArea"></div>
				
			 <div class="ui-grid-a">	
		<div class="ui-block-a">
        	<a href="" data-role="button" data-corners="false" data-icon="plus"  data-mini="true" data-iconshadow="false"  class="ui-icon-nodisc"
							id="willBuy">I will buy</a>
        </div>
        <div class="ui-block-b">
        	<a href="" data-role="button"  data-corners="false" data-icon="check" data-mini="true" data-iconshadow="false" class="ui-icon-nodisc"
							id="ihave">I have</a>
							</div>
         </div>

		</div>
				<div data-role="footer" data-position="fixed">
				<div data-role="navbar" >
				<ul>
					<li><a href="#home"  data-icon="search" data-iconshadow="false"  class="ui-btn ui-icon-nodisc" >Items</a></li>
					<li><a href="#user" data-icon="home" data-iconshadow="false" data-inline="true"  class="ui-btn ui-icon-nodisc" >My Lists</a></li>
					<li><a href="wastereason.html"  id="wasteReason1" data-icon="info" data-iconshadow="false" data-inline="true"  class="ui-btn ui-icon-nodisc">
					<span id="badge-page2" class="ui-li-count ui-btn-corner-all badge"></span>My Bin</a></li>		
					
					<!-- <li><a href="survey.html" id="survey" data-icon="custom" class="ui-badge-container"></a></li> -->
					<!-- <li><a href="userInfo.html" id="userInfo" data-icon="custom" class="ui-badge-container"></a></li> -->
					</ul>
			</div><!-- /navbar -->
			</div>
			
			<div data-role="panel" data-position-fixed="true" data-theme="a"
				id="nav-panel">
				<ul data-role="listview" data-theme="a" class="nav-search">
					<li data-icon="delete"><a href="#" data-rel="close">Close</a></li>
					<li data-icon="edit" ><a href="survey.html" id="survey" data-transition="slide">Survey</a></li>
					<li data-icon="gear" ><a href="userInfo.html" id="userInfo" data-transition="slide">Me</a></li>

				</ul>
			</div>
			<!-- /panel -->
		</div>
		
		
		
		
				<div data-role="page" id="user" data-theme="a">
			<!-- load user food list -->
	
			<script>
			
				//global variable to store the coun of items for deletion
				var toBeDeleted = 0;
				var toBeDeletedArray = new Array();
				var toBeDelFromShopping = new Array();
			
				//loadUserList();

					
			</script>
			
 	
			<div data-role="header" data-position="fixed" data-id="nav"> 
				<h1>EUPHORIA</h1>
			 <a href="#nav-panel" data-icon="bars" data-iconpos="notext"  data-iconshadow="false"  class="ui-icon-nodisc">Menu</a>
			
			</div>
			
			<div data-role="content">				
				
				<label class="table-title-label"><i><u>I will buy</u></i></label>
				<div id="userShoppingList"></div>
				
				<p></p>
				<label class="table-title-label"><i><u>I have</u></i></label>
				<select name="sortBy" id="sortBy"  class="select-class ui-icon-nodisc"
					 data-theme="a" value="Sort by Date" data-mini="true" data-inline="true" 
					 data-corners="false" data-iconshadow="false"  onchange="sortUserFoodsByDate(this.value);">
					<option value="ASC">Oldest</option>
					<option value="DESC">Newest</option>
				</select>
				
				
				<div id="userFoodInfo"></div>
				<p></p>
				 <div class="ui-grid-a">	
				<div class="ui-block-a">
					
					<a href="" type="button" id="deleteSelected" 
						data-iconshadow="false" data-mini="true" class="ui-icon-nodisc ui-disabled" 
						data-corners="false" data-icon="delete" data-iconpos="left" 
						data-theme="a" onclick="deleteSelectedItems();"  >Delete</a>
				</div>				
				<div class="ui-block-b">
					
					<a href="" type="button" id="undo" 
						data-iconshadow="false" data-mini="true" class="ui-icon-nodisc ui-disabled" 
						data-corners="false" data-icon="back" data-iconpos="left" 
						data-theme="a" onclick="undoChanges();"  >Undo</a>
				</div>
				</div>
			</div>
			<div data-role="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a href="#home"  id="foodList" data-icon="search" data-iconshadow="false" data-inline="true"  class="ui-btn ui-icon-nodisc">Items</a></li>
					<li><a href="#user" data-icon="home" data-iconshadow="false" data-inline="true"  class="ui-btn ui-icon-nodisc">My Lists</a></li>
					<!-- <li><a href="usagereason.html" id="utensils" data-icon="custom" class="ui-badge-container">
					<span id="badge-page3" class="badge"></span></a></li> -->
					<li><a href="wastereason.html" id="wasteReason2" data-icon="info" data-iconshadow="false" data-inline="true" class="ui-btn ui-icon-nodisc">
					<span id="badge-page4" class="badge"></span>My Bin</a></li>					
				
					<!-- <li><a href="survey.html" data-icon="edit" data-inline="true"></a></li>
					<li><a href="userInfo.html" id="userInfo" data-icon="custom" class="ui-badge-container"></a></li> -->
					</ul>
			</div><!-- /navbar -->
			</div>
			<div data-role="panel" data-position-fixed="true" data-theme="a"
				id="nav-panel">
				<ul data-role="listview" data-theme="a" class="nav-search">
					<li data-icon="delete"><a href="#" data-rel="close">Close</a></li>
					<li data-icon="edit" ><a href="survey.html" id="survey" data-transition="slide">Survey</a></li>
					<li data-icon="gear" ><a href="userInfo.html" id="userInfo" data-transition="slide">Me</a></li>

				</ul>
			</div>
			<!-- /panel -->
		</div>
		
		
				<!-- <div data-role="page" id="wastereason" data-theme="a">
			load user food list
			<script>
				
				/* if(newUsageNumber != 0) {
					$('#badge-page7').html(newUsageNumber).fadeIn();	
				} */
				if(newWasteNumber != 0) {
					$('#badge-page8').html(newWasteNumber).fadeIn();
				}
				 
				 var toBeDeletedWaste = 0;
			</script>
			<div data-role="header" data-position="fixed" data-id="nav"> 
				<h1>EUPHORIA</h1>
			 <a href="#nav-panel" data-icon="bars" data-iconpos="notext"  data-iconshadow="false"  class="ui-icon-nodisc">Menu</a>
			
			</div>
			/navbar
			<div data-role="content">
				<label class="table-title-label"><i><u>Reasons of Disposal</u></i></label><p></p>
				<div id="wasteList"></div>
				<p></p>
				<div align="right">
					
					<a href="" type="button" id="deleteSelectedWaste" 
						data-iconshadow="false" data-mini="true" class="ui-icon-nodisc ui-disabled" 
						data-corners="false" data-icon="delete" data-iconpos="left" 
						data-theme="a"  onclick="deleteSelectedData();" >Delete</a>
				</div>
			</div>
			<div data-role="footer" data-position="fixed">
			<div data-role="navbar" >
				<ul>
					<li><a href="foodList.html"  data-icon="search" data-iconshadow="false" data-inline="true"  data-transition="slide" class="ui-btn ui-icon-nodisc">Items</a></li>
					<li><a href="#user" data-icon="home" data-iconshadow="false" data-inline="true"  data-transition="slide" class="ui-btn ui-icon-nodisc">My Lists</a></li>
					<li><a href="usagereason.html" id="utensils" data-icon="custom" class="ui-badge-container">
					<span id="badge-page7" class="badge"></span></a></li>
					<li><a href="#wastereason" data-icon="info" data-iconshadow="false" data-inline="true"  data-transition="slide" class="ui-btn ui-icon-nodisc">
					<span id="badge-page8" class="badge"></span>My Bin</a></li>		
					
					<li><a href="survey.html" id="survey" data-icon="custom" class="ui-badge-container"></a></li>
					<li><a href="userInfo.html" id="userInfo" data-icon="custom" class="ui-badge-container"></a></li>
					</ul>
			</div>/navbar
			</div>
			<div data-role="panel" data-position-fixed="true" data-theme="a"
				id="nav-panel">
				<ul data-role="listview" data-theme="a" class="nav-search">
					<li data-icon="delete"><a href="#" data-rel="close">Close</a></li>
					<li data-icon="edit" ><a href="survey.html" id="survey" data-transition="slide">Survey</a></li>
					<li data-icon="gear" ><a href="userInfo.html" id="userInfo" data-transition="slide">Me</a></li>


				</ul>
			</div>
			/panel
		</div>
		
		 -->
		
		
		
	</div>
	
	<script type="text/javascript" src="cordova.js"></script>
</body>
</html>

